CREATE TABLE account (id INT UNSIGNED AUTO_INCREMENT, email VARCHAR(255) NOT NULL, slug VARCHAR(255) NOT NULL, salt VARCHAR(255) NOT NULL, password VARCHAR(255) NOT NULL, state VARCHAR(255) NOT NULL, last_login DATETIME, validation_code VARCHAR(45), culture VARCHAR(3) NOT NULL, currency VARCHAR(3) NOT NULL, type VARCHAR(255) NOT NULL, is_designer TINYINT(1) DEFAULT '0', created_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE account_forgot_password (account_id INT UNSIGNED NOT NULL, unique_key VARCHAR(255), expires_at DATETIME NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX account_id_idx (account_id), PRIMARY KEY(unique_key)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE account_remember_key (account_id INT UNSIGNED NOT NULL, remember_key VARCHAR(32), ip_address VARCHAR(50), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX account_id_idx (account_id), PRIMARY KEY(remember_key)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE frapp (id INT UNSIGNED AUTO_INCREMENT, name VARCHAR(50) NOT NULL, admins LONGTEXT, slug VARCHAR(250) NOT NULL, slogan VARCHAR(250), state VARCHAR(255) NOT NULL, filename VARCHAR(255), logo_x1 SMALLINT, logo_y1 SMALLINT, logo_x2 SMALLINT, logo_y2 SMALLINT, sourceimage_w SMALLINT, sourceimage_h SMALLINT, state_support_sponsor bool DEFAULT 0, sponsor_accept_pledge bool DEFAULT 0, sponsor_goal INT UNSIGNED DEFAULT 0, state_support_campaign bool DEFAULT 0, campaign_raise_money bool DEFAULT 0, state_support_promote bool DEFAULT 0, state_support_petition bool DEFAULT 0, parent_id INT UNSIGNED, creator_id INT UNSIGNED NOT NULL, skin_id INT UNSIGNED NOT NULL, created_at DATETIME NOT NULL, INDEX creator_id_idx (creator_id), INDEX skin_id_idx (skin_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE frapp_mdl (id INT UNSIGNED AUTO_INCREMENT, slug VARCHAR(255), name VARCHAR(100) NOT NULL, type_key VARCHAR(10) NOT NULL, frapp_id INT UNSIGNED NOT NULL, position BIGINT, UNIQUE INDEX frapp_mdl_sluggable_idx (slug, frapp_id), UNIQUE INDEX sortable_idx (position, frapp_id), INDEX frapp_id_idx (frapp_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE frapp_skin (id INT UNSIGNED AUTO_INCREMENT, name VARCHAR(250) NOT NULL, description text, state VARCHAR(255), author_id INT UNSIGNED, created_at DATETIME NOT NULL, INDEX author_id_idx (author_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE location (id INT UNSIGNED AUTO_INCREMENT, city VARCHAR(100) NOT NULL, region VARCHAR(100) NOT NULL, country VARCHAR(2) NOT NULL, lang VARCHAR(2) NOT NULL, population MEDIUMINT UNSIGNED DEFAULT '0' NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE profile_company (account_id INT UNSIGNED, name VARCHAR(100) NOT NULL, brand_name VARCHAR(100) NOT NULL, slogan VARCHAR(250), cui VARCHAR(100) NOT NULL, contact_name VARCHAR(100), contact_job_title VARCHAR(100), contact_email VARCHAR(100), contact_phone VARCHAR(100), location_id INT UNSIGNED, INDEX location_id_idx (location_id), PRIMARY KEY(account_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE profile_organization (account_id INT UNSIGNED, name VARCHAR(100) NOT NULL, brand_name VARCHAR(100) NOT NULL, slogan VARCHAR(250), cui VARCHAR(100) NOT NULL, contact_name VARCHAR(100), contact_job_title VARCHAR(100), contact_email VARCHAR(100), contact_phone VARCHAR(100), location_id INT UNSIGNED, INDEX location_id_idx (location_id), PRIMARY KEY(account_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE profile_person (account_id INT UNSIGNED, first_name VARCHAR(100), last_name VARCHAR(100), slogan VARCHAR(250), date_of_birth DATE, gender VARCHAR(255), location_id INT UNSIGNED, INDEX location_id_idx (location_id), PRIMARY KEY(account_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE session (sess_id VARCHAR(255), sess_data text, sess_time INT UNSIGNED NOT NULL, PRIMARY KEY(sess_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
ALTER TABLE account_forgot_password ADD CONSTRAINT account_forgot_password_account_id_account_id FOREIGN KEY (account_id) REFERENCES account(id) ON DELETE CASCADE;
ALTER TABLE account_remember_key ADD CONSTRAINT account_remember_key_account_id_account_id FOREIGN KEY (account_id) REFERENCES account(id) ON DELETE CASCADE;
ALTER TABLE frapp ADD CONSTRAINT frapp_skin_id_frapp_skin_id FOREIGN KEY (skin_id) REFERENCES frapp_skin(id);
ALTER TABLE frapp ADD CONSTRAINT frapp_creator_id_account_id FOREIGN KEY (creator_id) REFERENCES account(id);
ALTER TABLE frapp_mdl ADD CONSTRAINT frapp_mdl_frapp_id_frapp_id FOREIGN KEY (frapp_id) REFERENCES frapp(id);
ALTER TABLE frapp_skin ADD CONSTRAINT frapp_skin_author_id_account_id FOREIGN KEY (author_id) REFERENCES account(id);
ALTER TABLE profile_company ADD CONSTRAINT profile_company_location_id_location_id FOREIGN KEY (location_id) REFERENCES location(id);
ALTER TABLE profile_organization ADD CONSTRAINT profile_organization_location_id_location_id FOREIGN KEY (location_id) REFERENCES location(id);
ALTER TABLE profile_person ADD CONSTRAINT profile_person_location_id_location_id FOREIGN KEY (location_id) REFERENCES location(id);
